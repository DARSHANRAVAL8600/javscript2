<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨ Future Space - Personal Hub</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #2d3748;
            min-height: 100%;
            line-height: 1.6;
        }

        html { height: 100%; }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
        }

        .sync-status {
            position: absolute;
            top: 15px;
            right: 20px;
            padding: 8px 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sync-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #48bb78;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        h1 {
            font-size: 3.5rem;
            margin: 0 0 10px 0;
            font-weight: 700;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 1.2rem;
            margin: 0;
            opacity: 0.9;
            font-weight: 300;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f7fafc;
        }

        .card-icon {
            font-size: 2rem;
            margin-right: 15px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-title {
            font-size: 1.5rem;
            margin: 0;
            font-weight: 600;
            color: #2d3748;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
            background: #f8fafc;
        }

        .input:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input::placeholder {
            color: #a0aec0;
        }

        .btn {
            width: 100%;
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn.loading {
            pointer-events: none;
            opacity: 0.7;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .btn-danger {
            background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
            width: auto;
            padding: 10px 20px;
            font-size: 0.9rem;
            margin: 0;
        }

        .btn-danger:hover {
            box-shadow: 0 8px 25px rgba(245, 101, 101, 0.4);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
            width: auto;
            margin: 0;
        }

        .preview-area {
            width: 100%;
            height: 200px;
            border: 2px dashed #cbd5e0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            background: #f8fafc;
            transition: all 0.3s ease;
            color: #718096;
            font-size: 1.1rem;
        }

        .preview-area:hover {
            border-color: #667eea;
            background: #edf2f7;
        }

        .preview-area img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 8px;
        }

        .data-section {
            margin-top: 30px;
            padding: 25px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .data-section h3 {
            margin: 0 0 20px 0;
            font-size: 1.2rem;
            color: #2d3748;
            font-weight: 600;
        }

        .search-box {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            margin-bottom: 20px;
            box-sizing: border-box;
            background: white;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 8px 16px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .filter-tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .data-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 15px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .data-item:first-child {
            padding-top: 0;
        }

        .data-content {
            flex: 1;
            margin-right: 15px;
        }

        .data-content strong {
            color: #2d3748;
            display: block;
            margin-bottom: 5px;
        }

        .data-content small {
            color: #718096;
            font-size: 0.85rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 8px;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #718096;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .export-section {
            margin-top: 20px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .export-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            min-width: 300px;
            background: white;
            border-radius: 12px;
            z-index: 1000;
            transform: translateX(400px);
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 10px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-content {
            display: flex;
            align-items: center;
            padding: 15px 20px;
        }

        .toast-icon {
            font-size: 1.2rem;
            margin-right: 12px;
        }

        .toast-message {
            flex: 1;
            font-weight: 500;
            color: #2d3748;
        }

        .toast-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #718096;
            padding: 0;
            margin-left: 10px;
        }

        .toast-close:hover {
            color: #2d3748;
        }

        .toast-success { border-left: 4px solid #48bb78; }
        .toast-error { border-left: 4px solid #f56565; }
        .toast-warning { border-left: 4px solid #ed8936; }
        .toast-info { border-left: 4px solid #667eea; }

        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .container { padding: 15px; }
            .sync-status { position: static; margin-bottom: 20px; }
        }

        @media (max-width: 480px) {
            h1 { font-size: 2rem; }
            .stats-grid { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .export-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="sync-status">
                <div class="sync-indicator"></div>
                <span id="syncStatus">Local Storage</span>
            </div>
            <h1>✨ Future Space</h1>
            <p class="subtitle">Your Advanced Personal Digital Universe</p>
        </div>

        <div class="grid">
            <!-- Profile Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">👤</div>
                    <h2 class="card-title">Profile Hub</h2>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" id="name" class="input" placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="email" class="input" placeholder="Enter your email">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Bio</label>
                    <input type="text" id="bio" class="input" placeholder="Tell us about yourself">
                </div>
                
                <button class="btn" onclick="saveProfile()">
                    <span class="btn-text">Save Profile</span>
                </button>
                
                <div id="profileData" class="data-section" style="display: none;">
                    <h3>Your Profile</h3>
                    <div id="profileInfo"></div>
                </div>
            </div>

            <!-- Image Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🖼️</div>
                    <h2 class="card-title">Image Gallery</h2>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Select Image</label>
                    <input type="file" id="imageFile" class="input" accept="image/*" onchange="previewImage()">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Image Title</label>
                    <input type="text" id="imageTitle" class="input" placeholder="Give your image a title">
                </div>
                
                <div class="preview-area" id="preview">
                    <div>📷 Image preview will appear here</div>
                </div>
                
                <button class="btn" onclick="saveImage()">
                    <span class="btn-text">Save Image</span>
                </button>
                
                <div id="imageData" class="data-section" style="display: none;">
                    <h3>Your Images</h3>
                    <input type="text" class="search-box" id="imageSearch" placeholder="🔍 Search images..." onkeyup="filterImages()">
                    <div id="imageInfo"></div>
                </div>
            </div>

            <!-- Notes Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📝</div>
                    <h2 class="card-title">Smart Notes</h2>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Note Title</label>
                    <input type="text" id="noteTitle" class="input" placeholder="Enter note title">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Note Content</label>
                    <input type="text" id="noteContent" class="input" placeholder="Write your note here">
                </div>
                
                <button class="btn" onclick="saveNote()">
                    <span class="btn-text">Add Note</span>
                </button>
                
                <div id="noteData" class="data-section" style="display: none;">
                    <h3>Your Notes</h3>
                    <input type="text" class="search-box" id="noteSearch" placeholder="🔍 Search notes..." onkeyup="filterNotes()">
                    <div class="filter-tabs">
                        <div class="filter-tab active" onclick="filterNotesByDate('all')">All</div>
                        <div class="filter-tab" onclick="filterNotesByDate('today')">Today</div>
                        <div class="filter-tab" onclick="filterNotesByDate('week')">This Week</div>
                    </div>
                    <div id="noteInfo"></div>
                </div>
            </div>

            <!-- Stats & Management Card -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📊</div>
                    <h2 class="card-title">Analytics & Management</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number" id="profileCount">0</span>
                        <div class="stat-label">Profile</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="imageCount">0</span>
                        <div class="stat-label">Images</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="noteCount">0</span>
                        <div class="stat-label">Notes</div>
                    </div>
                </div>
                
                <div class="export-section">
                    <h4 style="margin: 0 0 15px 0; color: #2d3748;">Data Management</h4>
                    <div class="export-buttons">
                        <button class="btn btn-small" onclick="exportData()">📥 Export Data</button>
                        <button class="btn btn-small" onclick="importData()">📤 Import Data</button>
                        <button class="btn btn-small" onclick="backupData()">💾 Backup</button>
                        <button class="btn btn-danger btn-small" onclick="clearAll()">🗑️ Clear All</button>
                    </div>
                    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleImport()">
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced API Service for future backend integration
        class APIService {
            constructor() {
                this.baseURL = '/api'; // Future backend URL
                this.isOnline = navigator.onLine;
                this.syncQueue = JSON.parse(localStorage.getItem('syncQueue')) || [];
                this.updateSyncStatus();
            }

            updateSyncStatus() {
                const statusEl = document.getElementById('syncStatus');
                if (this.isOnline) {
                    statusEl.textContent = 'Ready for Backend';
                } else {
                    statusEl.textContent = 'Local Storage';
                }
            }

            // Simulate API calls with localStorage fallback
            async request(endpoint, options = {}) {
                try {
                    // Future: return fetch(`${this.baseURL}${endpoint}`, options);
                    return this.simulateAPI(endpoint, options);
                } catch (error) {
                    console.error('API Error:', error);
                    throw error;
                }
            }

            simulateAPI(endpoint, options) {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ success: true, data: null });
                    }, Math.random() * 500 + 200);
                });
            }

            queueOperation(operation) {
                this.syncQueue.push({
                    id: Date.now(),
                    operation,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('syncQueue', JSON.stringify(this.syncQueue));
            }
        }

        const api = new APIService();

        // Enhanced toast notification system
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <div class="toast-content">
                    <span class="toast-icon">${getToastIcon(type)}</span>
                    <span class="toast-message">${message}</span>
                    <button class="toast-close" onclick="this.parentElement.parentElement.remove()">×</button>
                </div>
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (document.body.contains(toast)) {
                            document.body.removeChild(toast);
                        }
                    }, 400);
                }
            }, 5000);
        }

        function getToastIcon(type) {
            const icons = {
                'success': '✅',
                'error': '❌',
                'warning': '⚠️',
                'info': 'ℹ️'
            };
            return icons[type] || 'ℹ️';
        }

        // Button loading state
        function setButtonLoading(button, loading = true) {
            const textEl = button.querySelector('.btn-text');
            if (loading) {
                button.classList.add('loading');
                textEl.innerHTML = '<div class="loading-spinner"></div>Processing...';
            } else {
                button.classList.remove('loading');
                textEl.textContent = textEl.getAttribute('data-original') || 'Save';
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadProfile();
            loadImages();
            loadNotes();
            updateStats();
            
            // Store original button texts
            document.querySelectorAll('.btn-text').forEach(el => {
                el.setAttribute('data-original', el.textContent);
            });
        });

        // Enhanced Profile functions
        async function saveProfile() {
            const button = event.target;
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const bio = document.getElementById('bio').value.trim();

            if (!name || !email) {
                showToast('Please fill in name and email fields', 'error');
                return;
            }

            setButtonLoading(button, true);

            try {
                const profile = { 
                    name, 
                    email, 
                    bio, 
                    date: new Date().toLocaleDateString(),
                    lastModified: new Date().toISOString()
                };
                
                // Simulate API call
                await api.request('/profile', {
                    method: 'POST',
                    body: JSON.stringify(profile)
                });
                
                localStorage.setItem('profile', JSON.stringify(profile));
                loadProfile();
                updateStats();
                showToast('Profile saved successfully!', 'success');
                
                // Clear form
                document.getElementById('name').value = '';
                document.getElementById('email').value = '';
                document.getElementById('bio').value = '';
                
            } catch (error) {
                showToast('Failed to save profile', 'error');
            } finally {
                setButtonLoading(button, false);
            }
        }

        function loadProfile() {
            const profile = JSON.parse(localStorage.getItem('profile'));
            const section = document.getElementById('profileData');
            const info = document.getElementById('profileInfo');

            if (profile) {
                section.style.display = 'block';
                info.innerHTML = `
                    <div class="data-item">
                        <div class="data-content">
                            <strong>Name:</strong> ${profile.name}
                        </div>
                    </div>
                    <div class="data-item">
                        <div class="data-content">
                            <strong>Email:</strong> ${profile.email}
                        </div>
                    </div>
                    <div class="data-item">
                        <div class="data-content">
                            <strong>Bio:</strong> ${profile.bio || 'No bio provided'}
                        </div>
                    </div>
                    <div class="data-item">
                        <div class="data-content">
                            <strong>Created:</strong> ${profile.date}
                            <small>Last modified: ${new Date(profile.lastModified || profile.date).toLocaleString()}</small>
                        </div>
                        <button class="btn btn-danger" onclick="deleteProfile()">Delete</button>
                    </div>
                `;
            } else {
                section.style.display = 'none';
            }
        }

        function deleteProfile() {
            if (confirm('Are you sure you want to delete your profile?')) {
                localStorage.removeItem('profile');
                loadProfile();
                updateStats();
                showToast('Profile deleted', 'success');
            }
        }

        // Enhanced Image functions
        function previewImage() {
            const file = document.getElementById('imageFile').files[0];
            const preview = document.getElementById('preview');

            if (file) {
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    showToast('Image size should be less than 5MB', 'warning');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                };
                reader.readAsDataURL(file);
            }
        }

        async function saveImage() {
            const button = event.target;
            const file = document.getElementById('imageFile').files[0];
            const title = document.getElementById('imageTitle').value.trim();

            if (!file || !title) {
                showToast('Please select an image and provide a title', 'error');
                return;
            }

            setButtonLoading(button, true);

            try {
                const reader = new FileReader();
                reader.onload = async function(e) {
                    const images = JSON.parse(localStorage.getItem('images')) || [];
                    const newImage = {
                        id: Date.now(),
                        title,
                        data: e.target.result,
                        size: file.size,
                        type: file.type,
                        date: new Date().toLocaleDateString(),
                        timestamp: new Date().toISOString()
                    };

                    // Simulate API call
                    await api.request('/images', {
                        method: 'POST',
                        body: JSON.stringify(newImage)
                    });

                    images.push(newImage);
                    localStorage.setItem('images', JSON.stringify(images));
                    loadImages();
                    updateStats();
                    showToast('Image saved successfully!', 'success');

                    // Clear form
                    document.getElementById('imageFile').value = '';
                    document.getElementById('imageTitle').value = '';
                    document.getElementById('preview').innerHTML = '<div>📷 Image preview will appear here</div>';
                };
                reader.readAsDataURL(file);
            } catch (error) {
                showToast('Failed to save image', 'error');
            } finally {
                setButtonLoading(button, false);
            }
        }

        function loadImages() {
            const images = JSON.parse(localStorage.getItem('images')) || [];
            const section = document.getElementById('imageData');
            const info = document.getElementById('imageInfo');

            if (images.length > 0) {
                section.style.display = 'block';
                displayImages(images);
            } else {
                section.style.display = 'none';
            }
        }

        function displayImages(images) {
            const info = document.getElementById('imageInfo');
            info.innerHTML = images.map(img => `
                <div class="data-item" data-title="${img.title.toLowerCase()}">
                    <div class="data-content">
                        <strong>${img.title}</strong>
                        <div style="margin: 8px 0; color: #718096; font-size: 0.85rem;">
                            Size: ${formatFileSize(img.size)} • Type: ${img.type}
                        </div>
                        <small>Saved on ${img.date}</small>
                    </div>
                    <button class="btn btn-danger" onclick="deleteImage(${img.id})">Delete</button>
                </div>
            `).join('');
        }

        function filterImages() {
            const searchTerm = document.getElementById('imageSearch').value.toLowerCase();
            const items = document.querySelectorAll('#imageInfo .data-item');
            
            items.forEach(item => {
                const title = item.getAttribute('data-title');
                if (title.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function deleteImage(id) {
            if (confirm('Are you sure you want to delete this image?')) {
                const images = JSON.parse(localStorage.getItem('images')) || [];
                const filtered = images.filter(img => img.id !== id);
                localStorage.setItem('images', JSON.stringify(filtered));
                loadImages();
                updateStats();
                showToast('Image deleted', 'success');
            }
        }

        // Enhanced Note functions
        async function saveNote() {
            const button = event.target;
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();

            if (!title || !content) {
                showToast('Please fill in both title and content', 'error');
                return;
            }

            setButtonLoading(button, true);

            try {
                const notes = JSON.parse(localStorage.getItem('notes')) || [];
                const newNote = {
                    id: Date.now(),
                    title,
                    content,
                    date: new Date().toLocaleDateString(),
                    timestamp: new Date().toISOString(),
                    wordCount: content.split(' ').length
                };

                // Simulate API call
                await api.request('/notes', {
                    method: 'POST',
                    body: JSON.stringify(newNote)
                });

                notes.push(newNote);
                localStorage.setItem('notes', JSON.stringify(notes));
                loadNotes();
                updateStats();
                showToast('Note saved successfully!', 'success');

                // Clear form
                document.getElementById('noteTitle').value = '';
                document.getElementById('noteContent').value = '';
            } catch (error) {
                showToast('Failed to save note', 'error');
            } finally {
                setButtonLoading(button, false);
            }
        }

        function loadNotes() {
            const notes = JSON.parse(localStorage.getItem('notes')) || [];
            const section = document.getElementById('noteData');

            if (notes.length > 0) {
                section.style.display = 'block';
                displayNotes(notes);
            } else {
                section.style.display = 'none';
            }
        }

        function displayNotes(notes) {
            const info = document.getElementById('noteInfo');
            info.innerHTML = notes.map(note => `
                <div class="data-item" data-title="${note.title.toLowerCase()}" data-content="${note.content.toLowerCase()}" data-date="${note.timestamp}">
                    <div class="data-content">
                        <strong>${note.title}</strong>
                        <div style="margin: 8px 0; color: #4a5568;">${note.content}</div>
                        <small>Created on ${note.date} • ${note.wordCount} words</small>
                    </div>
                    <button class="btn btn-danger" onclick="deleteNote(${note.id})">Delete</button>
                </div>
            `).join('');
        }

        function filterNotes() {
            const searchTerm = document.getElementById('noteSearch').value.toLowerCase();
            const items = document.querySelectorAll('#noteInfo .data-item');
            
            items.forEach(item => {
                const title = item.getAttribute('data-title');
                const content = item.getAttribute('data-content');
                if (title.includes(searchTerm) || content.includes(searchTerm)) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function filterNotesByDate(period) {
            // Update active tab
            document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            const items = document.querySelectorAll('#noteInfo .data-item');
            const now = new Date();
            
            items.forEach(item => {
                const itemDate = new Date(item.getAttribute('data-date'));
                let show = true;

                if (period === 'today') {
                    show = itemDate.toDateString() === now.toDateString();
                } else if (period === 'week') {
                    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                    show = itemDate >= weekAgo;
                }

                item.style.display = show ? 'flex' : 'none';
            });
        }

        function deleteNote(id) {
            if (confirm('Are you sure you want to delete this note?')) {
                const notes = JSON.parse(localStorage.getItem('notes')) || [];
                const filtered = notes.filter(note => note.id !== id);
                localStorage.setItem('notes', JSON.stringify(filtered));
                loadNotes();
                updateStats();
                showToast('Note deleted', 'success');
            }
        }

        // Enhanced Statistics
        function updateStats() {
            const profile = localStorage.getItem('profile');
            const images = JSON.parse(localStorage.getItem('images')) || [];
            const notes = JSON.parse(localStorage.getItem('notes')) || [];

            document.getElementById('profileCount').textContent = profile ? '1' : '0';
            document.getElementById('imageCount').textContent = images.length;
            document.getElementById('noteCount').textContent = notes.length;
        }

        // Data Management Functions
        function exportData() {
            const data = {
                profile: JSON.parse(localStorage.getItem('profile')),
                images: JSON.parse(localStorage.getItem('images')) || [],
                notes: JSON.parse(localStorage.getItem('notes')) || [],
                exportDate: new Date().toISOString(),
                version: '2.0'
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `future-space-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showToast('Data exported successfully!', 'success');
        }

        function importData() {
            document.getElementById('importFile').click();
        }

        function handleImport() {
            const file = document.getElementById('importFile').files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.profile) localStorage.setItem('profile', JSON.stringify(data.profile));
                    if (data.images) localStorage.setItem('images', JSON.stringify(data.images));
                    if (data.notes) localStorage.setItem('notes', JSON.stringify(data.notes));

                    loadProfile();
                    loadImages();
                    loadNotes();
                    updateStats();

                    showToast('Data imported successfully!', 'success');
                } catch (error) {
                    showToast('Invalid backup file format', 'error');
                }
            };
            reader.readAsText(file);
        }

        function backupData() {
            const data = {
                profile: localStorage.getItem('profile'),
                images: localStorage.getItem('images'),
                notes: localStorage.getItem('notes')
            };

            sessionStorage.setItem('futureSpaceBackup', JSON.stringify(data));
            showToast('Data backed up to session storage!', 'success');
        }

        function clearAll() {
            if (confirm('⚠️ This will delete ALL your data permanently. Are you sure?')) {
                localStorage.clear();
                loadProfile();
                loadImages();
                loadNotes();
                updateStats();
                showToast('All data cleared successfully!', 'warning');
            }
        }

        // Utility functions
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Network status monitoring
        window.addEventListener('online', () => {
            api.updateSyncStatus();
            showToast('Back online! Ready for backend sync', 'success');
        });

        window.addEventListener('offline', () => {
            api.updateSyncStatus();
            showToast('Working offline with local storage', 'info');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98ecaf16f2cf4425',t:'MTc2MDUwMzcwNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
